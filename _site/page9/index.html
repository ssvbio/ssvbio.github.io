<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Biologist's bioinformatics notes</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="/js/jquery.min.js"></script>
  <script src="/js/bootstrap.min.js"></script>
  <link href="/css/bootstrap.min.css" rel="stylesheet" type="text/css">
  <link href="/css/theme.css" rel="stylesheet" type="text/css">
  <link href="/css/syntax.css" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
  <meta name="google-site-verification" content="fhL4tu7YrFAnIGAUl7DqfxgyLuyY6vE5h8o6fUwzoJM" />
</head>

<body>
  <nav class="navbar-fixed-top bg-primary">
    <span class="navbar-brand">Bioinformatics notes from a biologist</span>
    <ul class="nav navbar-nav">
      <li class="active"><a href="/"><i class="fas fa-home fa-2x"></i> Home</a></li>
      <li class="active"><a href="/archive.html"><i class="fas fa-archive fa-2x"></i> Archive</a></li>
    </ul>
  </nav>
</body>


<div class="container-fluid">
    <div class="row">
        <div class="col-md-3 hidden-xs">
            <div class=well>
  <div class="sidebar">
    12 November 2020
  </div>
  <div class="sidebar">
    <h1>Recent Posts</h1>
    <ul>
        
          <li><a href="/expand_rows_awk">Expand rows using awk</a></li>
        
          <li><a href="/install_vep_focal">How to install VEP on focal</a></li>
        
          <li><a href="/print_overlaps_python">Generate substrings in python</a></li>
        
          <li><a href="/break_string">Generate overlapping strings</a></li>
        
          <li><a href="/average_replicates">Average biological replicates</a></li>
        
    </ul>
  </div>
  <div class="sidebar">
    <h1>Links</h1>
<ul>
  <li><a target="_blank" rel="noopener noreferrer" href="https://www.linkedin.com/in/svsk/">Linkedin</a></li>
  <li><a target="_blank" rel="noopener noreferrer" href="https://www.github.com/svsuresh">Github</a></li>
</ul>

  </div>
</div>
        </div>
        <div class="col-md-9">
          <div class="article">
            <div class="well">
                <h1><a href="/expand_rows_awk">Nov 12, 2020 - Expand rows using awk</a></h1>
            <div class="post-content">
            <p>Several times, we tend to collapse and expand rows based on group information. In this note, let us learn to expand the collapsed rows. Following is an example input:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>input:

a	1,2,3
b	horse
</code></pre></div></div>
<p>Now we need to expand the rows in a single row for each value in second column</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">awk</span>  <span class="nt">-v</span> <span class="nv">OFS</span><span class="o">=</span><span class="s2">"</span><span class="se">\t</span><span class="s2">"</span>  <span class="s1">'{split($2,a,","); for (i in a) {print $1,a[i]}}'</span> test.txt

a	1
a	2
a	3
b	horse
b	donkey
b	dog
</code></pre></div></div>
<p>Trick is in splitting the second column, store the values in an array and then print the values for each element in the array. Let us look at few real life examples.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>input:
<span class="nv">$cat</span> test.txt 

41867799,41867388,41866990  chr17:41866927-41867904
</code></pre></div></div>
<p>awk code and output</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$awk</span> <span class="nt">-v</span> <span class="nv">FS</span><span class="o">=</span><span class="s1">'[-:\t]'</span> <span class="nt">-v</span> <span class="nv">OFS</span><span class="o">=</span><span class="s2">"</span><span class="se">\t</span><span class="s2">"</span>  <span class="s1">' NR != 1 {split($1,a,","); for (i in a) {print $2,$3"-"a[i],$3,a[i]}}'</span> test.txt

chr17   41866927-41867799   41866927    41867799
chr17   41866927-41867388   41866927    41867388
chr17   41866927-41866990   41866927    41866990
</code></pre></div></div>
<p>Another example</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>input:

ID                 GENE              Qvalue
T0100007038  NECAP2            1.17
T0100007063  FAM231C<span class="p">;</span> FAM231A  <span class="nt">-1</span>.04
T0100007206  CDA               <span class="nt">-1</span>.15
T0100007207  PINK1<span class="p">;</span> MIR6084    1.1
</code></pre></div></div>
<p>Code and output</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">awk</span> <span class="nt">-v</span> <span class="nv">OFS</span><span class="o">=</span><span class="s2">"</span><span class="se">\t</span><span class="s2">"</span> <span class="s1">'{split($2,a,";"); for(i in a)print $1,a[i],$3}'</span> test.txt 

ID  GENE     Qvalue
T0100007038   NECAP2   1.17
T0100007063   FAM231C      <span class="nt">-1</span>.04
T0100007063   FAM231A      <span class="nt">-1</span>.04
T0100007206   CDA      <span class="nt">-1</span>.15
T0100007207   PINK1    1.1
T0100007207   MIR6084      1.1
</code></pre></div></div>

            </div>
          </div>
          <div class="pagination">
              
              
                <a class="btn btn-default" href="/install_vep_focal" class="previous">Older Post</a>
              
          </div>
        </div>
    </div>
</div>

<body>
<html>	
<div class="container-fluid">
    <div class="row-fluid">
        <div class="span12 footer navbar-inverse navbar-fixed-bottom">
            <p class="copyright">&copy;2020 Biologist's bioinformatics notes. Powered by <a href="http://jekyllrb.com">Jekyll</a>, theme by <a href="https://github.com/scotte/jekyll-clean">Scott Emmons</a>
            under
            <a href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution</a></p>
        </div>
    </div>
</div>

</body>
</html>



<div class="pagination">
  
      
        <a class="btn btn-default" href="/page8" class="previous">Newer</a>
      
  
</div>
